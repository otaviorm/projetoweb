<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="catalago.css">
    <title>Catálogo de Imóveis</title>
</head>

<body>
    <header>
        <div class="container">
            <div id="texto">
                <h1>Bem-vindo à Viva Bela</h1>
                <p>Encontre o imóvel dos seus sonhos</p>
            </div>
            <nav id="nav">
                <a class="site" href="../inicio.html">Início</a>
                <a class="site" href="catalogo.html">Imóveis à Venda</a>
                <a class="site" href="../formulario/formulario.html">Cadastro</a>
                <a class="site" href="../sobre/sobre.html">Sobre Nós</a>
            </nav>
        </div>
    </header>

    <section class="bem_vindo">
        <h2>Imóveis à Venda</h2>
        <div class="catalog" id="lista-anuncios">
            <!-- <div class="property">
                <img src="" alt="Imagem do Imóvel 1">
                <h4>Imóvel 1</h4>
                <p>Descrição breve do imóvel. </p>
                <p>Preço: R$ 500.000</p>
                <a href="https://www.brasilcasas.com.br/blog/casa-de-madeira-pre-fabricada-visitando-o-showroom-de-campinas-sp/">Saiba mais</a>
            </div>
             -->

        </div>

    </section>


    <script>
        const listaAnuncios = document.getElementById('lista-anuncios');

        // Fazer uma requisição GET à API de anúncios
        fetch('http://127.0.0.1:8000/core/')
            .then(response => response.json())
            .then(data => {
                // Iterar sobre os dados recebidos da API e criar elementos HTML para cada anúncio
                data.forEach(anuncio => {
                    const divAnuncio = document.createElement('div');
                    divAnuncio.className = 'property';

                    campos = anuncio['fields']

                    // const imagem = document.createElement('img');
                    // imagem.src = anuncio.imagemUrl;
                    // imagem.alt = `Imagem do Imóvel ${anuncio.id}`;

                    const h4 = document.createElement('h4');
                    h4.textContent = campos.titulo;

                    const descricao = document.createElement('p');
                    descricao.textContent = campos.descricao;

                    const preco = document.createElement('p');
                    preco.textContent = `Preço: R$ ${campos.valor}`;

                    const saibaMais = document.createElement('a');
                    saibaMais.href = campos.linkSaibaMais;
                    saibaMais.textContent = 'Saiba mais';

                    //divAnuncio.appendChild(imagem);
                    divAnuncio.appendChild(h4);
                    divAnuncio.appendChild(descricao);
                    divAnuncio.appendChild(preco);
                    divAnuncio.appendChild(saibaMais);

                    listaAnuncios.appendChild(divAnuncio);
                });
            })
            .catch(error => {
                console.error('Erro ao buscar dados da API:', error);
            });
    </script>

</body>

</html>