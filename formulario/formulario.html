<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="formulario.css">
    <title>Formulário de Cadastro</title>
</head>
<body>

    <header>
        <div class="container">
            <h1 id="h1">Viva Bela</h1>
            <nav id="nav">
                <a class="site" href="../inicio.html">Início</a>
                <a class="site" href="../catalogo/catalogo.html">Imóveis à Venda</a>
                <a class="site" href="formulario.html">Cadastro</a>
                <a class="site" href="../sobre/sobre.html">Sobre Nós</a>
            </nav>
        </div>
    </header>

    <div class="forms">
        <form id="cadastro-form" method="post">
            <h2>Cadastro</h2>

            <label for="titulo">Titulo:</label><br>
            <input type="text" id="titulo" name="titulo" required><br><br>

            <label for="qtd_quartos">Quantidade de quartos:</label><br>
            <input type="number" id="qtd_quartos" name="qtd_quartos" required><br><br>

            <label for="qtd_banheiro">Quantidade de banheiros:</label><br>
            <input type="number" id="qtd_banheiro" name="qtd_banheiro" required><br><br>

            <label for="valor">Valor:</label><br>
            <input type="number" id="valor" name="valor" required><br><br>

            <label for="vagas">Quantidade de vagas:</label><br>
            <input type="number" id="vagas" name="vagas" required><br><br>

            <label for="descricao">Descriçao:</label><br>
            <input type="text" id="descricao" name="descricao" required><br><br>

            <label for="tamanho">Tamanho(m³):</label><br>
            <input type="number" id="tamanho" name="tamanho" required><br><br>

            <label for="endereco">Endereço:</label><br>
            <input type="text" id="endereco" name="endereco" required><br><br>

            <input type="submit" value="Cadastrar">
        </form>
    </div>

    <script>
        const formulario = document.getElementById('cadastro-form');

        document.addEventListener('DOMContentLoaded', function () {


            formulario.addEventListener('submit', async function (e) {
                e.preventDefault(); // Impede o envio padrão do formulário

                const formData = new FormData(formulario);

                try {
                    const response = await fetch('http://127.0.0.1:8000/core/salvar/', {
                        method: 'POST',
                        body: formData
                    });

                    if (!response.ok) {
                        throw new Error('Erro na requisição');
                    }

                } catch (error) {
                    console.error('Erro:', error);
                }
            });
        });
    
    </script>

</body>
</html>